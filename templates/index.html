<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Essay Classifier</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            /* Theme colors from UI-instructions.txt */
            --brand: #C04B4B;    /* primary */
            --warm-1: #E09B5E;   /* secondary */
            --warm-2: #F1D27B;   /* accent */
            --deep: #613A2B;     /* dark */
            --teal: #498779;     /* accent-2 */

            /* neutrals */
            --bg: #F4F6F8;
            --panel: #FFFFFF;
            --muted: #6B7280;
            --border: #E6E9EE;
            --glass: rgba(255,255,255,0.85);

            /* shadows */
            --shadow-soft: 0 6px 18px rgba(18, 25, 30, 0.06);
            --shadow-subtle: 0 2px 8px rgba(18, 25, 30, 0.04);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        html,body { height: 100%; }

        body {
            font-family: 'Roboto', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(180deg, var(--bg) 0%, #eef2f5 100%);
            color: #111827;
            -webkit-font-smoothing:antialiased;
            padding: 36px 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .wrap {
            width: 100%;
            max-width: 920px;
        }

        .header {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 22px;
            padding: 20px 24px;
            border-radius: 12px;
            background: linear-gradient(90deg, rgba(192,75,75,0.06), rgba(73,135,121,0.02));
            border: 1px solid var(--border);
            box-shadow: var(--shadow-subtle);
        }

        .brand-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 64px;
            height: 64px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--brand) 0%, var(--warm-1) 100%);
            color: white;
            font-size: 28px;
            box-shadow: 0 4px 14px rgba(192,75,75,0.18);
        }

        .header h1 {
            font-size: 1.5rem;
            color: var(--deep);
            font-weight: 600;
            letter-spacing: -0.2px;
        }

        .header p {
            color: var(--muted);
            font-size: 0.95rem;
            margin-top: 4px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 360px;
            gap: 22px;
            margin-top: 18px;
        }

        @media (max-width: 900px) {
            .grid { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--panel);
            border-radius: 14px;
            padding: 22px;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border);
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--deep);
            font-size: 0.95rem;
        }

        textarea {
            width: 100%;
            min-height: 220px;
            padding: 14px 16px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: var(--glass);
            resize: vertical;
            font-size: 1rem;
            color: #111827;
            transition: box-shadow .12s ease, transform .08s ease;
        }

        textarea:focus {
            outline: none;
            box-shadow: 0 6px 20px rgba(73,135,121,0.08);
            border-color: var(--teal);
            background: #fff;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(90deg, var(--brand) 0%, var(--warm-1) 100%);
            color: white;
            padding: 12px 18px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(192,75,75,0.12);
            transition: transform .08s ease, box-shadow .12s ease;
        }

        .btn:active { transform: translateY(1px); }
        .btn[disabled] { opacity: 0.7; cursor: not-allowed; }

        .info {
            margin-top: 14px;
            padding: 12px 14px;
            background: linear-gradient(180deg, rgba(73,135,121,0.03), rgba(240,242,243,0.02));
            border-left: 4px solid var(--teal);
            border-radius: 8px;
            color: var(--muted);
            font-size: 0.92rem;
        }

        /* Right column / results */
        .result-panel {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .result-card {
            padding: 18px;
            border-radius: 12px;
            background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.96));
            border: 1px solid var(--border);
            box-shadow: var(--shadow-subtle);
        }

        .result-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: var(--deep);
        }

        .result-content {
            margin-top: 14px;
            padding: 16px;
            border-radius: 10px;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .result-ai {
            background: linear-gradient(90deg, rgba(192,75,75,0.06), rgba(224,155,94,0.02));
            border: 1px solid rgba(192,75,75,0.08);
        }

        .result-human {
            background: linear-gradient(90deg, rgba(73,135,121,0.06), rgba(241,210,123,0.02));
            border: 1px solid rgba(73,135,121,0.06);
        }

        .result-icon {
            width: 64px;
            height: 64px;
            border-radius: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            flex-shrink: 0;
        }

        .result-icon.ai { background: linear-gradient(135deg, var(--brand), var(--warm-1)); }
        .result-icon.human { background: linear-gradient(135deg, var(--teal), var(--warm-2)); }

        .result-badge {
            margin-left: auto;
            background: #fff;
            border-radius: 999px;
            padding: 8px 12px;
            font-weight: 600;
            color: var(--muted);
            border: 1px solid var(--border);
            display: inline-flex;
            gap: 8px;
            align-items: center;
            font-size: 0.9rem;
        }

        /* Confidence */
        .confidence {
            margin-top: 12px;
            text-align: center;
        }

        .confidence-score {
            font-size: 2.4rem;
            font-weight: 700;
            color: var(--deep);
        }

        .confidence-sub {
            color: var(--muted);
            font-size: 0.92rem;
            margin-top: 6px;
        }

        /* Probability bars */
        .probability-item { margin-top: 12px; }
        .prob-header {
            display:flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--deep);
            font-size: 0.92rem;
            margin-bottom: 8px;
        }

        .bar {
            height: 14px;
            background: linear-gradient(90deg, rgba(17,24,39,0.04), rgba(17,24,39,0.02));
            border-radius: 999px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .fill-human {
            height: 100%;
            background: linear-gradient(90deg, var(--teal), var(--warm-2));
            border-radius: 999px;
            transition: width 0.9s cubic-bezier(.2,.9,.2,1);
        }

        .fill-ai {
            height: 100%;
            background: linear-gradient(90deg, var(--brand), var(--warm-1));
            border-radius: 999px;
            transition: width 0.9s cubic-bezier(.2,.9,.2,1);
        }

        /* Error */
        .error-card {
            background: linear-gradient(180deg, rgba(240, 231, 231, 0.95), rgba(255,255,255,0.96));
            border-left: 4px solid var(--brand);
            border-radius: 10px;
            padding: 12px 14px;
            color: var(--deep);
            margin-bottom: 12px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .footer {
            margin-top: 22px;
            text-align: center;
            color: var(--muted);
            font-size: 0.88rem;
        }

        /* loading spinner used inside button */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,.3);
            border-top-color: rgba(255,255,255,0.9);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="wrap">
        <div class="header">
            <div class="brand-icon">
                <span class="material-icons">psychology</span>
            </div>
            <div>
                <h1>AI Essay Classifier</h1>
                <p>Assess whether an essay is likely AI-generated or human-written</p>
            </div>
        </div>

        {% if result and not result.success %}
        <div class="error-card">
            <span class="material-icons" style="color:var(--brand);">error_outline</span>
            <div style="font-weight:600">{{ result.error }}</div>
        </div>
        {% endif %}

        <div class="grid">
            <div>
                <div class="card">
                    <form method="POST" id="classifierForm">
                        <label for="text">
                            <span class="material-icons" style="vertical-align: middle; margin-right: 6px; font-size: 1rem;">description</span>
                            Paste Essay Text
                        </label>
                        <textarea name="text" id="text" placeholder="Paste the essay text here for classification..." required>{{ text if text else '' }}</textarea>

                        <div style="display:flex; gap:12px; margin-top:14px; align-items:center;">
                            <button type="submit" class="btn">
                                <span class="material-icons">analytics</span>
                                Analyze Text
                            </button>
                            <div style="color:var(--muted); font-size:0.9rem;">Model inspects style, vocabulary, and patterns</div>
                        </div>
                    </form>

                    <div class="info" style="margin-top:16px;">
                        <strong style="color:var(--deep);">How it works</strong>
                        <div style="margin-top:6px;">
                            Uses a trained classifier to evaluate stylistic and lexical signals. Results are probabilistic and should be used as guidance.
                        </div>
                    </div>
                </div>
            </div>

            <aside class="result-panel">
                {% if result and result.success %}
                <div class="result-card">
                    <div class="result-title">
                        <span class="material-icons" style="font-size:20px; color:var(--muted);">assessment</span>
                        Classification Result
                    </div>

                    {% if result.prediction == "AI-Generated" %}
                    <div class="result-content result-ai" style="margin-top:12px;">
                        <div class="result-icon ai">
                            <span class="material-icons">smart_toy</span>
                        </div>
                        <div style="flex:1">
                            <div style="font-weight:700; color:var(--deep); font-size:1.05rem;">{{ result.prediction }}</div>
                            <div style="color:var(--muted); margin-top:6px;">This text is likely generated by an AI model.</div>
                        </div>
                        <div class="result-badge"><span class="material-icons" style="font-size:16px; color:var(--brand);">computer</span>AI</div>
                    </div>
                    {% else %}
                    <div class="result-content result-human" style="margin-top:12px;">
                        <div class="result-icon human">
                            <span class="material-icons">person</span>
                        </div>
                        <div style="flex:1">
                            <div style="font-weight:700; color:var(--deep); font-size:1.05rem;">{{ result.prediction }}</div>
                            <div style="color:var(--muted); margin-top:6px;">This text is likely written by a human author.</div>
                        </div>
                        <div class="result-badge"><span class="material-icons" style="font-size:16px; color:var(--teal);">edit</span>Human</div>
                    </div>
                    {% endif %}

                    <div class="confidence" style="margin-top:14px;">
                        <div class="confidence-score">{{ result.confidence }}%</div>
                        <div class="confidence-sub">Overall confidence</div>
                    </div>

                    <div style="margin-top:14px;">
                        <div class="probability-item">
                            <div class="prob-header">
                                <div style="display:flex; align-items:center; gap:8px;">
                                    <span class="material-icons" style="font-size:18px; color:var(--muted);">person</span>
                                    <div style="font-weight:600; color:var(--deep);">Human-Written</div>
                                </div>
                                <div style="font-weight:700; color:var(--deep)">{{ result.probabilities.human }}%</div>
                            </div>
                            <div class="bar">
                                <div class="fill-human" style="width: {{ result.probabilities.human }}%"></div>
                            </div>
                        </div>

                        <div class="probability-item">
                            <div class="prob-header">
                                <div style="display:flex; align-items:center; gap:8px;">
                                    <span class="material-icons" style="font-size:18px; color:var(--muted);">smart_toy</span>
                                    <div style="font-weight:600; color:var(--deep);">AI-Generated</div>
                                </div>
                                <div style="font-weight:700; color:var(--deep)">{{ result.probabilities.ai }}%</div>
                            </div>
                            <div class="bar">
                                <div class="fill-ai" style="width: {{ result.probabilities.ai }}%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="result-card" style="padding:20px;">
                    <div style="font-weight:700; color:var(--deep);">No result yet</div>
                    <div style="color:var(--muted); margin-top:8px;">Paste text and click Analyze Text to see classification and confidence details.</div>
                </div>
                {% endif %}
            </aside>
        </div>

        <div class="footer">
            ML-Powered Text Classification System â€¢ Built with Flask & Machine Learning
        </div>
    </div>

    <script>
        // Loading state for submit button
        document.getElementById('classifierForm').addEventListener('submit', function(e) {
            const btn = this.querySelector('.btn');
            const original = btn.innerHTML;
            btn.innerHTML = '<span class="loading"></span> Analyzing...';
            btn.disabled = true;

            setTimeout(() => {
                if (!this.checkValidity()) {
                    btn.innerHTML = original;
                    btn.disabled = false;
                }
            }, 120);
        });

        // Auto-resize textarea
        const textarea = document.getElementById('text');
        if (textarea) {
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
            // init height
            textarea.style.height = (textarea.scrollHeight) + 'px';
        }
    </script>
</body>
</html>
